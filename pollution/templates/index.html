{% extends "base.html" %}
{% load static %}

{% block title %}Air Quality Intelligence Dashboard{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'my_app/style.css' %}">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

<style>
    header, footer {
        text-align: center;
        padding: 1rem;
        background: #1f2937;
        color: #fff;
    }
    .main-section {
        padding: 2rem;
        max-width: 1200px;
        margin: auto;
    }
    .kpi-container {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
    }
    .kpi-card {
        background: #fff;
        padding: 1rem;
        border-radius: 8px;
        flex: 1;
        text-align: center;
    }
    #map {
        height: 400px;
        margin: 1rem 0;
        border-radius: 8px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        background: #fff;
    }
    th, td {
        padding: 0.75rem;
        text-align: center;
    }
    th {
        background: #2563eb;
        color: #fff;
    }
</style>
{% endblock %}

{% block content %}

<header>
    <h1>Air Quality Intelligence Dashboard</h1>
    <p>Delhi-NCR | Geo-spatial Analysis</p>
</header>

<section class="main-section">

    <h2>AQI Monitoring</h2>

    <div class="kpi-container">
        <div class="kpi-card">
            <span>Average AQI</span>
            <h3 id="avg">--</h3>
        </div>
        <div class="kpi-card">
            <span>Maximum AQI</span>
            <h3 id="max">--</h3>
        </div>
        <div class="kpi-card">
            <span>Locations</span>
            <h3 id="count">--</h3>
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Locations</th>
                <th>Latitude, Longitude</th>
                <th>PM2.5</th>
                <th>PM10</th>
                <th>AQI</th>
                <th>Category</th>
            </tr>
        </thead>
        <tbody id="table"></tbody>
    </table>

    <button id="viewMoreBtn">View More</button>

    <h3>Spatial AQI Distribution</h3>
    <div id="map"></div>

</section>

<footer>
    <p>Environmental Analytics Dashboard</p>
</footer>

{% endblock %}

{% block extra_js %}
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="{% static 'my_app/app.js' %}"></script>
{% endblock %}
